# cargo-nextest configuration
# https://nexte.st/book/configuration.html

[store]
# Where to store test archives
dir = "target/nextest"

# Default profile used when none specified
[profile.default]
# Fail fast - stop on first test failure
fail-fast = true
# Number of retries for flaky tests
retries = 0
# Test timeout
slow-timeout = { period = "60s", terminate-after = 2 }
# Status level to show
status-level = "pass"
# Final status level
final-status-level = "flaky"

# CI profile - used in GitHub Actions
[profile.ci]
# Don't fail fast in CI - run all tests to see full picture
fail-fast = false
# Retry flaky tests once
retries = 1
# Longer timeout for CI runners
slow-timeout = { period = "120s", terminate-after = 2 }
# Status level to show
status-level = "all"
# Final status level
final-status-level = "all"

# JUnit output for CI systems
[profile.ci.junit]
path = "junit.xml"
report-name = "humanssh-tests"
store-success-output = true
store-failure-output = true

# Local development profile - faster feedback
[profile.dev]
fail-fast = true
retries = 0
slow-timeout = { period = "30s" }
status-level = "pass"
